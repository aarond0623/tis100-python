@0
START:
  MOV 0 RIGHT
LOOP:
  MOV UP ACC
  JEZ END
  MOV ACC RIGHT
  JMP LOOP
END:
  MOV RIGHT ACC
  MOV ACC DOWN
  JNZ END
WAIT:
  MOV DOWN ACC
  JNZ END

@2
START:
  MOV RIGHT ACC
  SAV
  MOV RIGHT DOWN
  SUB DOWN
  JGZ 2ND
1ST:
  SWP
  MOV ACC RIGHT
  MOV DOWN NIL
  JMP START
2ND:
  MOV DOWN RIGHT

@3
MOV 999 ACC
MOV 0 DOWN
LOOP:
  SAV
  MOV UP ACC
  JEZ END
  MOV ACC DOWN
  MOV ACC LEFT
  SWP
  MOV ACC LEFT
  MOV LEFT ACC
  JMP LOOP
END:
  SWP
  MOV ACC RIGHT
  MOV RIGHT UP

@4
START:
  MOV LEFT DOWN
  MOV DOWN ACC
  JEZ RESET
  MOV 0 UP
  JMP L2
RESET:
  MOV 0 LEFT
  MOV 0 DOWN
  JMP START
L:
  MOV DOWN ACC
  JEZ END
L2:
  MOV ACC UP
  JMP L
END:
  MOV 1 LEFT
  MOV 1 DOWN

@6
MOV UP ACC
MOV ACC UP
MOV ACC UP

@7
START:
  MOV UP ACC
  SAV
L:
  SWP
  SAV
  MOV ACC RIGHT
  MOV LEFT ACC
  MOV ACC RIGHT
  JRO RIGHT
  MOV ACC DOWN
  JMP SK
  MOV ACC UP
SK:
  JNZ L
  MOV UP ACC
  JNZ START
  MOV 0 DOWN

@8
START:
  MOV LEFT ACC
  SUB LEFT
  JNZ NONZERO
ZERO:
  MOV 1 LEFT
  JMP START
NONZERO:
  MOV 3 LEFT
